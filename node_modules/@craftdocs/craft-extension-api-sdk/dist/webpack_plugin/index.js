"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CraftExtensionApiPluginOptions = exports.CraftExtensionApiPlugin = void 0;
var fs_1 = require("fs");
var webpack_inject_plugin_1 = __importDefault(require("webpack-inject-plugin"));
function customLoader(options) {
    var jsFile = (0, fs_1.readFileSync)(__dirname + "/../browser_module/index.js");
    return function () {
        return jsFile.toString("utf-8");
    };
}
var CraftExtensionApiPlugin = /** @class */ (function () {
    function CraftExtensionApiPlugin(options) {
        if (options === void 0) { options = {}; }
        this.options = options;
    }
    CraftExtensionApiPlugin.prototype.apply = function (compiler) {
        if (compiler.options.mode === "development") {
            new webpack_inject_plugin_1.default(customLoader(this.options)).apply(compiler);
        }
    };
    return CraftExtensionApiPlugin;
}());
exports.CraftExtensionApiPlugin = CraftExtensionApiPlugin;
var CraftExtensionApiPluginOptions = /** @class */ (function () {
    function CraftExtensionApiPluginOptions() {
    }
    return CraftExtensionApiPluginOptions;
}());
exports.CraftExtensionApiPluginOptions = CraftExtensionApiPluginOptions;
